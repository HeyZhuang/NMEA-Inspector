# 个人软件实践说明书

## 学生信息
- **姓名**：[学生姓名]
- **学号**：[学号]
- **专业**：[专业]
- **班级**：[班级]

## 项目概述
**项目名称**：AI串口NMEA解析器 - GNSS数据可视化软件
**项目类型**：基于Qt的跨平台桌面应用程序
**开发语言**：C++
**开发框架**：Qt 5.15+ (Qt Widgets)

## 个人负责模块

### 1. 主窗口界面设计 (MainWindow)
**职责范围**：
- 负责整体用户界面的设计和实现
- 实现各模块间的协调和集成
- 提供用户交互和操作控制

**技术实现**：
```cpp
class MainWindow : public QMainWindow
{
    Q_OBJECT
public:
    MainWindow(QWidget *parent = nullptr);
    ~MainWindow();
private:
    void setupUI();                    // 界面初始化
    void setupSerialControls();       // 串口控制面板
    void setupStatusDisplay();        // 状态显示面板
    void setupCharts();              // 图表区域设置
    void connectSignals();           // 信号槽连接
};
```

### 2. 串口控制面板设计
**功能描述**：
- 提供串口参数配置界面
- 实现串口连接状态控制
- 显示串口操作反馈信息

**界面组件**：
```cpp
// 串口控制组
QGroupBox *m_serialGroup;
QGridLayout *m_serialLayout;
QComboBox *m_portComboBox;           // 串口号选择
QComboBox *m_baudRateComboBox;       // 波特率选择
QComboBox *m_dataBitsComboBox;       // 数据位选择
QComboBox *m_stopBitsComboBox;       // 停止位选择
QComboBox *m_parityComboBox;         // 校验位选择
QPushButton *m_refreshButton;        // 刷新串口按钮
QPushButton *m_connectButton;        // 连接串口按钮
QPushButton *m_disconnectButton;     // 断开连接按钮
```

**技术特点**：
- **QComboBox**：下拉选择框，支持预设参数
- **QPushButton**：操作按钮，支持样式定制
- **QGridLayout**：网格布局，整齐排列控件
- **QGroupBox**：分组容器，逻辑清晰

### 3. 状态显示面板设计
**功能描述**：
- 实时显示GNSS定位状态信息
- 提供数据统计和监控功能
- 支持状态信息的格式化显示

**界面组件**：
```cpp
// 状态显示组
QGroupBox *m_statusGroup;
QGridLayout *m_statusLayout;
QLabel *m_fixTypeLabel;              // 定位类型
QLabel *m_satelliteCountLabel;       // 卫星数
QLabel *m_pdopLabel;                 // PDOP值
QLabel *m_latitudeLabel;             // 纬度
QLabel *m_longitudeLabel;            // 经度
QLabel *m_altitudeLabel;             // 海拔
QLabel *m_speedLabel;                // 速度
QLabel *m_courseLabel;               // 航向
```

**数据更新机制**：
```cpp
void MainWindow::updateStatusDisplay()
{
    if (m_dataHistory.isEmpty()) {
        return;
    }
    
    const GNSSData &latestData = m_dataHistory.last();
    
    m_fixTypeLabel->setText(latestData.fixType);
    m_satelliteCountLabel->setText(QString::number(latestData.satelliteCount));
    m_pdopLabel->setText(QString::number(latestData.pdop, 'f', 1));
    m_latitudeLabel->setText(QString::number(latestData.latitude, 'f', 6) + "°");
    m_longitudeLabel->setText(QString::number(latestData.longitude, 'f', 6) + "°");
    m_altitudeLabel->setText(QString::number(latestData.altitude, 'f', 1) + " m");
    m_speedLabel->setText(QString::number(latestData.speed, 'f', 1) + " m/s");
    m_courseLabel->setText(QString::number(latestData.course, 'f', 1) + "°");
}
```

### 4. 数据控制面板设计
**功能描述**：
- 提供数据保存和加载功能
- 实现数据清空和重置操作
- 支持离线文件回放功能

**界面组件**：
```cpp
// 控制按钮组
QGroupBox *m_controlGroup;
QVBoxLayout *m_controlButtonLayout;
QPushButton *m_saveDataButton;       // 保存数据按钮
QPushButton *m_clearDataButton;     // 清空数据按钮
QPushButton *m_loadFileButton;       // 加载离线文件按钮
```

**核心功能实现**：
```cpp
void MainWindow::onSaveData()
{
    if (m_dataHistory.isEmpty()) {
        QMessageBox::information(this, "提示", "没有数据可保存");
        return;
    }
    
    QString fileName = QFileDialog::getSaveFileName(
        this,
        "保存GNSS数据",
        QStandardPaths::writableLocation(QStandardPaths::DocumentsLocation) + "/gnss_data.csv",
        "CSV文件 (*.csv)"
    );
    
    if (!fileName.isEmpty()) {
        QFile file(fileName);
        if (file.open(QIODevice::WriteOnly | QIODevice::Text)) {
            QTextStream stream(&file);
            stream.setCodec("UTF-8");
            
            // 写入CSV头部
            stream << "时间戳,纬度,经度,海拔,卫星数,PDOP,HDOP,VDOP,定位类型,速度,航向\n";
            
            // 写入数据
            for (const GNSSData &data : m_dataHistory) {
                stream << data.timestamp.toString("yyyy-MM-dd hh:mm:ss") << ","
                       << data.latitude << ","
                       << data.longitude << ","
                       << data.altitude << ","
                       << data.satelliteCount << ","
                       << data.pdop << ","
                       << data.hdop << ","
                       << data.vdop << ","
                       << data.fixType << ","
                       << data.speed << ","
                       << data.course << "\n";
            }
            
            file.close();
            QMessageBox::information(this, "成功", "数据已保存到: " + fileName);
        }
    }
}
```

### 5. 数据接收显示区域
**功能描述**：
- 实时显示原始NMEA数据
- 提供数据流监控功能
- 支持数据行数限制和滚动显示

**技术实现**：
```cpp
// 数据接收显示
QTextEdit *m_dataDisplay;

void MainWindow::onDataReceived(const QString &data)
{
    // 显示原始数据
    m_dataDisplay->append(data.trimmed());
    
    // 限制显示行数
    if (m_dataDisplay->document()->blockCount() > 100) {
        QTextCursor cursor = m_dataDisplay->textCursor();
        cursor.movePosition(QTextCursor::Start);
        cursor.movePosition(QTextCursor::Down, QTextCursor::KeepAnchor, 50);
        cursor.removeSelectedText();
    }
    
    // 解析NMEA数据
    QStringList lines = data.split('\n', Qt::SkipEmptyParts);
    for (const QString &line : lines) {
        if (line.startsWith('$')) {
            m_nmeaParser->parseNMEASentence(line.trimmed());
        }
    }
}
```

### 6. 图表区域布局设计
**功能描述**：
- 集成三种图表到统一界面
- 实现图表的响应式布局
- 提供图表交互和操作功能

**布局设计**：
```cpp
void MainWindow::setupCharts()
{
    m_chartArea = new QWidget();
    m_chartLayout = new QVBoxLayout(m_chartArea);
    
    // 信噪比柱状图
    m_snrChartView = new QChartView(m_snrChart);
    m_snrChartView->setRenderHint(QPainter::Antialiasing);
    
    // 卫星雷达图
    m_radarChartView = new QChartView(m_radarChart);
    m_radarChartView->setRenderHint(QPainter::Antialiasing);
    
    // 运动轨迹图
    m_trajectoryChartView = new QChartView(m_trajectoryChart);
    m_trajectoryChartView->setRenderHint(QPainter::Antialiasing);
    
    // 添加到布局
    m_chartLayout->addWidget(m_snrChartView, 1);
    m_chartLayout->addWidget(m_radarChartView, 1);
    m_chartLayout->addWidget(m_trajectoryChartView, 1);
    
    m_mainLayout->addWidget(m_chartArea, 3);
}
```

## 开发过程

### 阶段1：界面设计 (1周)
- 设计整体布局结构
- 规划各功能模块的界面
- 确定用户交互流程

### 阶段2：界面实现 (2周)
- 实现主窗口和各个面板
- 集成图表显示区域
- 实现信号槽连接机制

### 阶段3：功能集成 (1周)
- 集成各功能模块
- 实现数据流控制
- 优化用户体验

## 技术收获

### 1. Qt Widgets框架
- **QMainWindow**：主窗口框架
- **QLayout**：布局管理器
- **QWidget**：基础控件类
- **QGroupBox**：分组容器

### 2. 用户界面设计
- **布局管理**：QHBoxLayout、QVBoxLayout、QGridLayout
- **控件使用**：QComboBox、QPushButton、QLabel、QTextEdit
- **样式定制**：QSS样式表的使用
- **响应式设计**：界面自适应调整

### 3. 系统集成技术
- **信号槽机制**：模块间的通信
- **数据流控制**：实时数据的处理
- **文件操作**：CSV文件的读写
- **对话框使用**：QFileDialog、QMessageBox

### 4. 用户体验设计
- **界面布局**：合理的空间分配
- **操作反馈**：按钮状态和消息提示
- **数据展示**：信息的清晰呈现
- **交互设计**：直观的操作流程

## 遇到的问题与解决方案

### 问题1：界面布局混乱
**现象**：控件排列不整齐，间距不合理
**解决方案**：
- 使用QGridLayout进行精确布局
- 设置合适的间距和对齐方式
- 使用QGroupBox进行逻辑分组

### 问题2：信号槽连接错误
**现象**：按钮点击没有响应
**解决方案**：
- 检查信号槽的连接语法
- 确保槽函数声明为slots
- 添加调试输出验证连接

### 问题3：数据更新不及时
**现象**：界面显示的数据滞后
**解决方案**：
- 使用定时器定期更新界面
- 实现增量更新机制
- 优化数据更新频率

### 问题4：文件操作权限问题
**现象**：无法保存文件到指定位置
**解决方案**：
- 使用QStandardPaths获取标准路径
- 检查文件写入权限
- 提供用户友好的错误提示

## 项目贡献

### 代码贡献
- **MainWindow类**：约800行代码
- **界面布局代码**：约300行代码
- **信号槽连接**：约200行代码
- **文件操作功能**：约150行代码
- **总计**：约1450行核心代码

### 界面设计贡献
- 整体界面架构设计
- 各功能模块的界面布局
- 用户交互流程设计
- 响应式布局实现

### 系统集成贡献
- 各模块间的协调机制
- 数据流的统一管理
- 错误处理的统一接口
- 用户体验的优化

## 学习总结

### 技术能力提升
1. **Qt界面开发**：掌握了专业的GUI开发技能
2. **系统架构设计**：具备了良好的模块化设计能力
3. **用户体验设计**：学会了用户友好的界面设计
4. **文件操作技术**：掌握了跨平台文件处理

### 工程能力提升
1. **需求分析**：能够准确理解用户需求
2. **系统设计**：具备了完整的系统架构设计能力
3. **集成测试**：掌握了多模块集成的测试方法
4. **文档编写**：能够编写详细的用户手册

### 团队协作
1. **模块协调**：与各模块开发者的良好协作
2. **接口设计**：为其他模块提供清晰的接口
3. **代码规范**：遵循了统一的编码标准
4. **版本管理**：熟练使用Git进行团队协作

## 答辩准备

### 技术演示
1. **界面操作演示**：展示完整的用户操作流程
2. **功能集成演示**：展示各模块的协调工作
3. **数据管理演示**：展示数据的保存和加载功能

### 技术问答准备
1. **Qt界面框架**：Widgets框架的核心概念
2. **布局管理**：各种布局管理器的使用
3. **信号槽机制**：Qt的通信机制原理
4. **文件操作**：跨平台文件处理技术

### 代码展示
1. **界面架构**：主窗口的设计结构
2. **布局管理**：界面布局的实现方法
3. **信号槽连接**：模块间通信的实现
4. **文件操作**：CSV文件处理的代码

---

**备注**：本说明书详细记录了个人在用户界面设计和系统集成方面的技术贡献，展现了完整的软件工程能力和用户体验设计水平。
