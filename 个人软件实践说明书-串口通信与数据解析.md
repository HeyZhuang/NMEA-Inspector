# 个人软件实践说明书

## 学生信息
- **姓名**：[学生姓名]
- **学号**：[学号]
- **专业**：[专业]
- **班级**：[班级]

## 项目概述
**项目名称**：AI串口NMEA解析器 - GNSS数据可视化软件
**项目类型**：基于Qt的跨平台桌面应用程序
**开发语言**：C++
**开发框架**：Qt 5.15+

## 个人负责模块

### 1. 串口通信模块 (SerialManager)
**职责范围**：
- 负责串口设备的检测、连接和配置
- 实现NMEA数据的实时接收和传输
- 处理串口通信异常和错误恢复

**技术实现**：
```cpp
class SerialManager : public QObject
{
    Q_OBJECT
public:
    bool openPort();                    // 打开串口
    void closePort();                   // 关闭串口
    QStringList getAvailablePorts();    // 获取可用串口
    void sendData(const QByteArray &data); // 发送数据
signals:
    void dataReceived(const QString &data); // 数据接收信号
    void portStatusChanged(bool isOpen);    // 状态变化信号
};
```

**核心功能**：
- **串口参数配置**：波特率(9600-460800)、数据位(5-8)、停止位(1-2)、校验位(无/奇/偶)
- **设备管理**：自动检测COM端口，支持虚拟串口
- **数据流控制**：实时数据接收，支持大数据量传输
- **异常处理**：设备断开、权限不足、超时等错误处理

**技术难点**：
1. **跨平台兼容性**：Windows/Linux/macOS串口API差异
2. **实时性要求**：NMEA数据流需要低延迟处理
3. **错误恢复**：串口断开后的自动重连机制

### 2. NMEA数据解析模块 (NMEAParser)
**职责范围**：
- 解析标准NMEA 0183格式数据
- 提取GNSS定位信息和卫星状态
- 数据格式转换和验证

**技术实现**：
```cpp
class NMEAParser : public QObject
{
    Q_OBJECT
public:
    bool parseNMEASentence(const QString &sentence);
    GNSSData getCurrentData() const;
    QList<SatelliteInfo> getSatelliteList() const;
private:
    bool parseGP GGA(const QStringList &fields);  // 定位数据
    bool parseGP RMC(const QStringList &fields); // 导航数据
    bool parseGP GSV(const QStringList &fields); // 卫星信息
    bool parseGP GSA(const QStringList &fields); // 精度因子
};
```

**支持的数据类型**：
- **$GPGGA**：全球定位系统定位数据（时间、经纬度、海拔、卫星数）
- **$GP RMC**：推荐最小定位信息（速度、航向、状态）
- **$GP GSV**：可见卫星信息（卫星ID、高度角、方位角、信噪比）
- **$GP GSA**：当前卫星信息（精度因子PDOP/HDOP/VDOP）

**数据结构设计**：
```cpp
struct GNSSData {
    QDateTime timestamp;       // 时间戳
    double latitude;          // 纬度
    double longitude;         // 经度
    double altitude;          // 海拔
    int satelliteCount;        // 卫星数
    double pdop, hdop, vdop;  // 精度因子
    QString fixType;          // 定位类型
    double speed, course;     // 速度、航向
    QList<SatelliteInfo> satellites; // 卫星列表
};

struct SatelliteInfo {
    int id;                   // 卫星ID
    int elevation;            // 高度角
    int azimuth;              // 方位角
    int snr;                  // 信噪比
    QString system;           // 卫星系统(GPS/北斗/GLONASS)
    bool used;                // 是否用于定位
};
```

**技术难点**：
1. **数据完整性**：处理不完整或损坏的NMEA语句
2. **坐标转换**：DDMM.MMMM格式到DD.DDDDDD格式转换
3. **多语句关联**：GSV多消息的合并处理

## 开发过程

### 阶段1：需求分析与设计 (1周)
- 分析NMEA 0183标准规范
- 设计串口通信架构
- 定义数据结构和接口

### 阶段2：核心功能实现 (2周)
- 实现SerialManager类
- 实现NMEAParser类
- 单元测试和调试

### 阶段3：集成测试 (1周)
- 与界面模块集成
- 性能优化
- 异常处理完善

## 技术收获

### 1. Qt框架应用
- **QSerialPort类**：串口通信的核心类
- **信号槽机制**：异步事件处理
- **QObject基类**：对象生命周期管理

### 2. 串口通信技术
- **RS232协议**：串口通信标准
- **数据流控制**：缓冲区管理
- **错误检测**：校验和验证

### 3. 数据解析技术
- **字符串处理**：QString类的高级用法
- **正则表达式**：数据格式验证
- **状态机设计**：解析状态管理

## 遇到的问题与解决方案

### 问题1：串口权限不足
**现象**：Windows系统下无法访问串口
**解决方案**：
- 以管理员权限运行程序
- 检查设备管理器中的串口状态
- 实现权限检测和用户提示

### 问题2：NMEA数据解析错误
**现象**：解析出的坐标值异常
**解决方案**：
- 添加数据有效性检查
- 实现坐标格式转换函数
- 增加调试日志输出

### 问题3：大数据量处理性能
**现象**：接收大量数据时程序卡顿
**解决方案**：
- 使用多线程处理
- 实现数据缓存机制
- 优化字符串操作

## 项目贡献

### 代码贡献
- **SerialManager类**：约300行代码
- **NMEAParser类**：约400行代码
- **数据结构定义**：约100行代码
- **总计**：约800行核心代码

### 文档贡献
- 串口通信技术文档
- NMEA数据格式说明
- API接口文档
- 单元测试用例

## 学习总结

### 技术能力提升
1. **Qt开发技能**：掌握了Qt框架的核心组件使用
2. **串口通信**：理解了底层硬件通信原理
3. **数据解析**：学会了复杂数据格式的处理方法
4. **软件架构**：掌握了模块化设计思想

### 工程能力提升
1. **需求分析**：能够准确理解技术需求
2. **系统设计**：具备良好的架构设计能力
3. **调试技能**：掌握了复杂问题的定位方法
4. **文档编写**：能够编写清晰的技术文档

### 团队协作
1. **接口设计**：为其他模块提供了清晰的接口
2. **代码规范**：遵循了统一的编码标准
3. **版本控制**：熟练使用Git进行代码管理
4. **沟通协调**：与团队成员保持良好的技术交流

## 答辩准备

### 技术演示
1. **串口连接演示**：展示串口检测和连接过程
2. **数据解析演示**：展示NMEA数据的实时解析
3. **错误处理演示**：展示异常情况的处理能力

### 技术问答准备
1. **Qt信号槽机制**：异步通信原理
2. **串口通信协议**：RS232标准详解
3. **NMEA数据格式**：0183标准规范
4. **性能优化**：大数据量处理策略

### 代码展示
1. **核心算法**：坐标转换算法
2. **设计模式**：观察者模式的应用
3. **异常处理**：错误恢复机制
4. **单元测试**：测试用例设计

---

**备注**：本说明书详细记录了个人在项目中的技术贡献和学习收获，为答辩提供了完整的技术支撑。
